<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>lombok使用 | 咩咩侠</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">lombok使用</h1><a id="logo" href="/.">咩咩侠</a><p class="description">英雄必横空出世,且不问出处</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">lombok使用</h1><div class="post-meta">Apr 23, 2018<span> | </span><span class="category"><a href="/categories/java/">java</a></span></div><div class="post-content"><h2 id="一-简介"><a href="#一-简介" class="headerlink" title="一 简介"></a>一 简介</h2><p>lombok可以大量减少模板代码,使代码更加简介,它能够在我们编译源码的时候自动帮我们生成getter和setter方法。即它最终能够达到的效果是：在源码中没有getter和setter方法，但是在编译生成的字节码文件中有getter和setter方法.</p>
<h2 id="二-注意"><a href="#二-注意" class="headerlink" title="二 注意"></a>二 注意</h2><p>lombok在使用过程中需要下载插件</p>
<h2 id="三-插件安装-eclipse-idea-windows环境"><a href="#三-插件安装-eclipse-idea-windows环境" class="headerlink" title="三 插件安装(eclipse;idea)windows环境"></a>三 插件安装(eclipse;idea)windows环境</h2><p>eclipse:</p>
<p>1.下载lombok.jar包<a href="https://projectlombok.org/download.html" target="_blank" rel="noopener">https://projectlombok.org/download.html</a></p>
<p>2.运行Lombok.jar: java -jar D:\software\lombok.jar D:\software\lombok.jar这是windows下lombok.jar所在的位置</p>
<p>数秒后将弹出一框，以确认eclipse的安装路径</p>
<p>3.确认完eclipse的安装路径后，点击install/update按钮，即可安装完成</p>
<p>4.安装完成之后，请确认eclipse安装路径下是否多了一个lombok.jar包，并且其</p>
<p>配置文件eclipse.ini中是否 添加了如下内容:<br>    -javaagent:lombok.jar<br>    -Xbootclasspath/a:lombok.jar<br>5.重启eclipse或myeclipse</p>
<p>idea:<br>使用快捷键ctrl+alt+s调起设置窗口，在窗口左边选择plugins–&gt;Browse repositories…</p>
<p><img src="https://i.imgur.com/8ExahJ7.png" alt="idea插件下载截图"></p>
<h2 id="四-lombok的使用"><a href="#四-lombok的使用" class="headerlink" title="四 lombok的使用"></a>四 lombok的使用</h2><p>使用lombok项目的方法很简单，分为四个步骤：<br>1)在需要自动生成getter和setter方法的类上，加上@Data注解<br>2)在编译类路径中加入lombok.jar包</p>
<pre>
 &lt;dependency>
    &lt;groupId>org.projectlombok&lt;/groupId>
    &lt;artifactId>lombok&lt;/artifactId>
    &lt;version>1.16.20&lt;/version>
    &lt;scope>provided&lt;/scope>
 &lt;/dependency>
</pre>
3)使用支持lombok的编译工具编译源代码（关于支持lombok的编译工具，见“四、支持lombok的编译工具”）
4)编译得到的字节码文件中自动生成了getter和setter方法

常用注解说明
<pre>
@NonNull : 注解在参数上, 如果该类参数为 null , 就会报出异常,  throw new NullPointException(参数名)
@Cleanup : 注释在引用变量前, 自动回收资源 默认调用 close() 方法
@Getter/@Setter : 注解在类上, 为类提供读写属性
@Getter(lazy=true) :
@ToString : 注解在类上, 为类提供 toString() 方法
@EqualsAndHashCode : 注解在类上, 为类提供 equals() 和 hashCode() 方法
@NoArgsConstructor, @RequiredArgsConstructor, @AllArgsConstructor : 注解在类上, 为类提供无参,有指定必须参数, 全参构造函数
@Data : 注解在类上, 为类提供读写属性, 此外还提供了 equals()、hashCode()、toString() 方法
@Value :
@Builder : 注解在类上, 为类提供一个内部的 Builder
@SneakThrows :
@Synchronized : 注解在方法上, 为方法提供同步锁
@Log :
@Log4j : 注解在类上, 为类提供一个属性名为 log 的 log4j 的日志对象
@Slf4j : 注解在类上, 为类提供一个属性名为 log 的 log4j 的日志对象

@Cleanup("dispose") org.eclipse.swt.widgets.CoolBar bar = new CoolBar(parent, 0);
@Cleanup InputStream in = new FileInputStream(args[0]);
@Cleanup OutputStream out = new FileOutputStream(args[1]);
</pre>

<h2 id="五-原理"><a href="#五-原理" class="headerlink" title="五 原理"></a>五 原理</h2><p>自从Java 6起，javac就支持“JSR 269 Pluggable Annotation Processing API”规范，只要程序实现了该API，就能在javac运行的时候得到调用。<br>举例来说，现在有一个实现了”JSR 269 API”的程序A,那么使用javac编译源码的时候具体流程如下：<br>1)javac对源代码进行分析，生成一棵抽象语法树(AST)<br>2)运行过程中调用实现了”JSR 269 API”的A程序<br>3)此时A程序就可以完成它自己的逻辑，包括修改第一步骤得到的抽象语法树(AST)<br>4)javac使用修改后的抽象语法树(AST)生成字节码文件<br>详细的流程图如下：</p>
<p><img src="https://i.imgur.com/ACmKvvp.gif" alt="javac运行流程"></p>
<p>lombok本质上就是这样的一个实现了”JSR 269 API”的程序。在使用javac的过程中，它产生作用的具体流程如下：<br>1)javac对源代码进行分析，生成一棵抽象语法树(AST)<br>2)运行过程中调用实现了”JSR 269 API”的lombok程序<br>3)此时lombok就对第一步骤得到的AST进行处理，找到@Data注解所在类对应的语法树(AST)，然后修改该语法树(AST)，增加getter和setter方法定义的相应树节点<br>4)javac使用修改后的抽象语法树(AST)生成字节码文件</p>
<h2 id="六-其他问题"><a href="#六-其他问题" class="headerlink" title="六 其他问题"></a>六 其他问题</h2><p>现在使用Intellij Idea作为Java项目的IDE，配置Oracle javac作为编译工具。<br>现在有一个A类，其中有一些字段，没有创建它们的setter和getter方法，使用了lombok的@Data注解，另外有一个B类，它调用了A类实例的相应字段的setter和getter方法<br>编译A类和B类所在的项目，并不会报错，因为最终生成的A类字节码文件中存在相应字段的setter和getter方法<br>但是，IDE发现B类源代码中所使用的A类实例的setter和getter方法在A类源代码中找不到定义，IDE会认为这是错误<br>要解决以上这个不是真正错误的错误，可以下载安装Intellij Idea中的”Lombok plugin”。</p>
<h2 id="引用"><a href="#引用" class="headerlink" title="引用:"></a>引用:</h2><blockquote>
<p><a href="https://blog.csdn.net/dslztx/article/details/46715803" target="_blank" rel="noopener">https://blog.csdn.net/dslztx/article/details/46715803</a></p>
<p><a href="https://www.cnblogs.com/shindo/p/7550790.html" target="_blank" rel="noopener">https://www.cnblogs.com/shindo/p/7550790.html</a></p>
<p><a href="https://www.cnblogs.com/daimajun/p/7136078.html" target="_blank" rel="noopener">https://www.cnblogs.com/daimajun/p/7136078.html</a></p>
</blockquote>
</div><div class="tags"><a href="/tags/lombok/">lombok</a></div><div class="post-nav"><a class="next" href="/2018/02/04/微信小程序-一/">微信小程序(一)</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/test/">test</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tools/">tools</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/wechat/">wechat</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/lombok/" style="font-size: 15px;">lombok</a> <a href="/tags/markdown/" style="font-size: 15px;">markdown</a> <a href="/tags/web-xml/" style="font-size: 15px;">web.xml</a> <a href="/tags/微信小程序/" style="font-size: 15px;">微信小程序</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/04/23/lombok使用/">lombok使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/04/微信小程序-一/">微信小程序(一)</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/04/web-xml配置文件详解/">web.xml配置文件详解</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/28/markdown-常用命令/">markdown 常用命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/24/Hello/">Hello</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/24/hello-world/">Hello World</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">咩咩侠.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.2.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>